<div class="flex flex-col w-full px-2 sm:px-7 md:px-16 bg-primary">
  <div class="flex flex-col md:flex-row w-full p-4 rounded-t-xl gap-2">
    <div class="flex flex-wrap w-full p-2 rounded-t-xl gap-2">
      <div class="flex flex-row w-full">
          <input type="text" placeholder="Search here (title, author, year, accession number)" 
                 class="input input-bordered w-1/2 rounded-xl text-lg 
                        font-medium text-primary slide-in-left bg-white"
                 [(ngModel)]="searchTerm"
                 (input)="onSearch()" />
          <button
              type="button"
              class="w-40 bg-white text-primary px-4 py-3 rounded-xl font-medium hover:bg-[#ffb700] hover:text-black transition duration-300 mb-1 ml-2 slide-in-right"
              (click)="clearSearch()">
              Clear
          </button>
      </div>
        <button
        routerLink="/materials-add"
        class="w-auto bg-secondary text-black px-4 py-3 rounded-xl font-medium">
        Add book
      </button>
      <button
        routerLink="/materials-type"
        class="w-auto bg-secondary text-black px-4 py-3 rounded-xl font-medium">
        Material type
      </button>
      <div class="flex justify-between items-center gap-5 slide-in-right">
        <span class="text-lg font-medium ml-3 text-white">Page {{ currentPage }} / {{ totalPages }}</span>
        <div class="flex gap-2">
            <button
                class="btn border-none bg-secondary text-black hover:bg-primary-focus hover:bg-white hover:text-[#801e1d]"
                [disabled]="currentPage === 1"
                (click)="onPageChange(currentPage - 1)"
            >
                Previous
            </button>
            <button
                class="btn border-none bg-secondary text-black hover:bg-primary-focus hover:bg-white hover:text-[#801e1d]"
                [disabled]="currentPage === totalPages"
                (click)="onPageChange(currentPage + 1)"
            >
                Next
            </button>
        </div>
    </div>
  </div>
  </div>
  <div class="p-3 bg-white text-black rounded-xl w-full mb-4 slide-in-right">
    <div class="overflow-x-auto">
      <table class="table w-full text-xs md:text-sm ">
        <thead>
          <tr class="text-primary text-center">
            <th (click)="sortMaterials('accnum')">Acc No.↕
                <span *ngIf="sortField === 'categoryid'" class="sort-arrow">
                  <ng-container *ngIf="sortOrder === 'ASC'">↑</ng-container>
                  <ng-container *ngIf="sortOrder === 'DESC'">↓</ng-container>
                </span>
              </th>                         
            <th (click)="sortMaterials('title')">Title↕
                <span *ngIf="sortField === 'title'" class="sort-arrow">
                    <ng-container *ngIf="sortOrder === 'ASC'">↑</ng-container>
                    <ng-container *ngIf="sortOrder === 'DESC'">↓</ng-container>
                </span>
            </th>
            <th (click)="sortMaterials('author')">Author↕
                <span *ngIf="sortField === 'author'" class="sort-arrow">
                    <ng-container *ngIf="sortOrder === 'ASC'">↑</ng-container>
                    <ng-container *ngIf="sortOrder === 'DESC'">↓</ng-container>
                </span>
            </th>
            <th (click)="sortMaterials('subj')">Subject↕
                <span *ngIf="sortField === 'subj'" class="sort-arrow">
                    <ng-container *ngIf="sortOrder === 'ASC'">↑</ng-container>
                    <ng-container *ngIf="sortOrder === 'DESC'">↓</ng-container>
                </span>
            </th>
            <th (click)="sortMaterials('copyright')">Copyright↕
                <span *ngIf="sortField === 'copyright'" class="sort-arrow">
                    <ng-container *ngIf="sortOrder === 'ASC'">↑</ng-container>
                    <ng-container *ngIf="sortOrder === 'DESC'">↓</ng-container>
                </span>
            </th>
            <th (click)="sortMaterials('callno')">Call number↕
                <span *ngIf="sortField === 'callno'" class="sort-arrow">
                    <ng-container *ngIf="sortOrder === 'ASC'">↑</ng-container>
                    <ng-container *ngIf="sortOrder === 'DESC'">↓</ng-container>
                </span>
            </th>
            <th>Action</th>
        </tr>
        </thead>
        <tbody class="text-start text-sm">
          @for (material of materials; track $index) {
            <tr>
              <td>{{ material.accnum }}</td>
              <td>
                <a
                  [routerLink]="['/material-info', material.accnum]"
                  class="text-primary font-semibold hover:text-[#ffb700] hover:underline"
                >
                  {{ material.title }}
                </a>
              </td>
              <td>{{ material.author | slice: 0:50 }}{{ material.author.length > 50 ? '...' : '' }}</td>
              <td>{{ material.subj }}</td>
              <td>{{ material.copyright }}</td>
              <td>{{ material.callno | slice: 0:8 }}{{ material.callno.length > 8 ? '...' : '' }}</td>
              <td>{{ material.status }}</td>
              <td>
                <button
                  class="bg-primary text-white border-none shadow-none btn-sm rounded-full font-medium"
                  [routerLink]="['/materials-edit', material.accnum]"
                >
                  Edit
                </button>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
</div>


