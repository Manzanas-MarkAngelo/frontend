<div class="flex flex-col w-full px-1 md:px-14 pt-20 bg-primary justify-center items-center">
  <div class="flex flex-col w-full lg:w-1/2">
    <div class="w-full">
      <div class="bg-primary mb-3 w-3/4 slide-in-right justify-between">
        <span class="text-white text-3xl ml-3">Add a material:</span>
      </div>
    </div>
    <div class="bg-white p-8 rounded-xl shadow-lg w-full h-full slide-in-right">
      <h1 class="text-2xl text-primary font-semibold ml-2 mb-5">
        Material details
      </h1>
      <form>
        <div class="mb-4 mt-1 flex items-center space-x-4">
          <!-- Book title -->
          <input
            id="title"
            name="title"
            type="text"
            class="w-1/2 
                   flex 
                   mt-1 
                   rounded-xl 
                   border 
                   border-gray-300 
                   px-3 
                   pl-6 
                   py-2 
                   focus:ring-opacity-50 
                   text-lg"
            placeholder="Title"
            [(ngModel)]="bookDetails.title" required />
          <!-- Category -->
            <div class="w-1/2 flex mt-1">
              <input
                id="category"
                name="category"
                type="hidden"
                [(ngModel)]="bookDetails.category" />
              <div class="flex-1 relative">
                <div class="dropdown dropdown-left w-full">
                  <div
                    tabindex="0" role="button"
                    class="btn w-full bg-secondary border-none text-black text-lg hover:bg-[#ffb700] rounded-box flex items-center justify-between"
                    (click)="toggleDropdown()">
                    <span>{{ selectedCategory?.mat_type || 'Select material category' }}</span>
                  </div>
                  <ul tabindex="0" *ngIf="isDropdownOpen"
                      class="dropdown-content menu bg-secondary rounded-box z-[1] w-full text-base font-medium text-black">
                    <li *ngFor="let category of categories">
                      <a (click)="selectCategory(category.cat_id, category.mat_type)" 
                         class="block px-4 py-2 hover:bg-[#ffb700] hover:text-black">
                        {{ category.mat_type }}
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
        </div>
        <div class="mb-4 mt-1 flex items-center space-x-4">
          <!-- Author -->
          <input
            id="author"
            name="author"
            type="text"
            class="w-1/2 
                   flex 
                   mt-1 
                   rounded-xl 
                   border 
                   border-gray-300 
                   px-3 
                   pl-6 
                   py-2 
                   focus:ring-opacity-50 
                   text-lg"
            placeholder="Author"
            [(ngModel)]="bookDetails.author" required />
          <!-- Subject Heading -->
          <input
            id="heading"
            name="heading"
            type="text"
            class="w-1/2 
                   flex 
                   mt-1 
                   rounded-xl 
                   border 
                   border-gray-300 
                   px-3 
                   pl-6 
                   py-2 
                   focus:ring-opacity-50 
                   text-lg"
            placeholder="Subject Heading"
            [(ngModel)]="bookDetails.heading" required />
          
        </div>
        <div class="mb-4 mt-1 flex items-center space-x-4">
          <!-- Copyright -->
          <input
            id="copyright"
            name="copyright"
            type="text"
            class="w-1/2 
                   flex 
                   mt-1 
                   rounded-xl 
                   border 
                   border-gray-300 
                   px-3 
                   pl-6 
                   py-2 
                   focus:ring-opacity-50 
                   text-lg"
            placeholder="Copyright"
            [(ngModel)]="bookDetails.copyright" required />
          <!-- Call number -->
          <input
            id="callnum"
            name="callnum"
            type="text"
            class="w-1/2 
                   flex 
                   mt-1 
                   rounded-xl 
                   border 
                   border-gray-300 
                   px-3 
                   pl-6 
                   py-2 
                   focus:ring-opacity-50 
                   text-lg"
            placeholder="Call number"
            [(ngModel)]="bookDetails.callnum" required />
        </div>
        <div class="mb-4 mt-1 flex items-center space-x-4">
          <!-- Edition -->
          <input
            id="edition"
            name="edition"
            type="text"
            class="w-1/2 
                   flex 
                   mt-1 
                   rounded-xl 
                   border 
                   border-gray-300 
                   px-3 
                   pl-6 
                   py-2 
                   focus:ring-opacity-50 
                   text-lg"
            placeholder="Edition"
            [(ngModel)]="bookDetails.edition" required />
          <!-- Publisher -->
          <input
            id="publisher"
            name="publisher"
            type="text"
            class="w-1/2 
                   flex 
                   mt-1 
                   rounded-xl 
                   border 
                   border-gray-300 
                   px-3 
                   pl-6 
                   py-2 
                   focus:ring-opacity-50 
                   text-lg"
            placeholder="Publisher"
            [(ngModel)]="bookDetails.publisher" required />
        </div>
        <div class="mb-4 mt-1 flex items-center space-x-2">
          <!-- ISBN -->
          <input
            id="isbn"
            name="isbn"
            type="text"
            class="w-1/2 
                   flex 
                   mt-1 
                   rounded-xl 
                   border 
                   border-gray-300 
                   px-3 
                   pl-6 
                   py-2 
                   focus:ring-opacity-50 
                   text-lg"
            placeholder="ISBN"
            [(ngModel)]="bookDetails.isbn" required />
          <!-- Back button -->
          <button
            type="button"
            class="w-1/4
                   bg-primary 
                   text-white 
                   px-4 
                   py-3 
                   rounded-xl 
                   font-medium 
                   hover:bg-[#ffb700] 
                   hover:text-black 
                   transition 
                   duration-300 
                   mt-0.5"
            (click)="goBack()">
            Back
          </button>
          <!-- Continue button -->
          <button
            type="button"
            (click)="openConfirmModal()"
            class="w-1/4 
                   bg-secondary 
                   text-black 
                   px-4 
                   py-3 
                   rounded-xl 
                   font-medium 
                   hover:bg-[#801e1d] 
                   hover:text-white 
                   transition 
                   duration-300 
                   mt-0.5">
            Continue
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Confirmation Modal -->
<div *ngIf="showModal" class="fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50">
  <div class="bg-white p-8 rounded-xl shadow-lg w-1/2 max-w-md">
    <h2 class="text-center text-xl font-medium text-primary mb-3">
      Do you really want to add this material?
    </h2>
    <div class="flex flex-col items-center justify-between h-full">
      <img src="../../../assets/return.jpg" alt="success" class="w-4/5 h-auto mb-4" />
      <div class="flex flex-row gap-4 w-full">
        <button
          (click)="closeConfirmModal()"
          class="flex-1
                 bg-primary 
                 text-white 
                 px-6 
                 py-3 
                 rounded-xl 
                 font-medium 
                 hover:bg-[#ffb700] 
                 hover:text-black 
                 transition 
                 duration-300">
          Back
        </button>
        <button
          (click)="saveBook()"
          class="flex-1
                 bg-secondary 
                 text-black 
                 px-6 
                 py-3 
                 rounded-xl 
                 font-medium 
                 hover:bg-[#801e1d] 
                 hover:text-white 
                 transition 
                 duration-300">
          Save changes
        </button>
      </div>
    </div>
  </div>
</div>
